\documentclass{article}
\usepackage[utf8]{inputenc}% encodage du fichier source
\usepackage[francais]{babel}% rajouter éventuellement english, greek, etc.
\usepackage{listings}
\usepackage{hyperref}
\hypersetup{urlcolor=,linkcolor=} % Does not apply color to href's
\lstset{
	tabsize=4,
	language=Java,
        basicstyle=\scriptsize,
        columns=fixed,
        extendedchars=true,
        breaklines=true,
		frame=single,
        showtabs=false,
        showspaces=false,
        showstringspaces=false,
        identifierstyle=\ttfamily,
        keywordstyle=\color[rgb]{0,0,1},
        commentstyle=\color[rgb]{0.133,0.545,0.133},
        stringstyle=\color[rgb]{0.627,0.126,0.941},
        numbers=left, 
        numberstyle=\tiny,
        xleftmargin=\parindent
}


\title{ANDROID - TP1}
\date{Source et pdf de ce TP
:\\ \href{https://bitbucket.org/olevitt/technologies-mobiles}{https://bitbucket.org/olevitt/technologies-mobiles}}

\begin{document}
\maketitle
Ce TP a deux objectifs :
\begin{itemize}
\item Se familiariser avec le SDK android et le plugin ADT pour eclipse
\item Construire une petite application de simulateur de crédit
\end{itemize}
\section{Mise en place}
\subsection{Verifier l'installation}
\begin{itemize}
\item Lancer Eclipse
\item Vérifier dans \textbf{Window/Preferences} la présence du menu android
\item Vérifier que le chemin du SDK est bien rempli
\end{itemize}
\begin{enumerate}
\item Quels sont les niveaux d'API disponibles ?
\end{enumerate}
\subsection{Hello world}
\begin{itemize}
\item Créer un nouveau projet android via \textbf{File/New/Other/Android/Android
Project}
\item Executer l'application (ctrl + F11)
\end{itemize}
\begin{enumerate}
 \setcounter{enumi}{1}
\item Pourquoi l'application ne se lance t'elle pas ?
\end{enumerate}
\begin{itemize}
\item L'android virtual device manager s'ouvre et permet de créer un
émulateur
\item L'AVD manager est aussi disponible via \textbf{Window / Android virtual
device manager}
\end{itemize}
\subsection{Créer un appareil virtuel}
\begin{itemize}
\item Créer un nouvel appareil en API 17 (4.2)
\item Démarrer l'appareil
\item Manipuler un peu l'émulateur
\item Lancer l'application sur l'émulateur (ctrl + F11)
\end{itemize}
\begin{enumerate}
 \setcounter{enumi}{2}
\item Quelles sont les applications pré-installées sur l'émulateur ?
\item Comment voir la log de l'émulateur ?
\end{enumerate}
\newpage
\section{Construire notre simulateur de crédit}
\subsection{Un peu d'UI}
Modifier le layout main pour y ajouter quelques composants :
\begin{itemize}
\item Un champ de texte (EditText) : montant
\item Un champ de texte (EditText) : durée
\item Ajouter un bouton (Button) : calculer
\item Obliger l'utilisateur à ne rentrer que des chiffres dans les champs en utilisant la propriété \href{http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType}{InputType}
\end{itemize}
\begin{enumerate}
 \setcounter{enumi}{4}
\item Que faut t'il prévoir pour pouvoir utiliser ces views en java ?
\end{enumerate}
\subsection{Rendre l'interface vivante}
\begin{itemize}
\item Ecouter les clicks sur le bouton et déclencher un toast lors d'un click sur le bouton
\item Rappel : 2 techniques ont été vues en cours pour écouter les actions
\item Dans le toast, afficher le contenu du champ de texte (utiliser la méthode getText() de EditText)
\end{itemize}
\subsection{Implémenter la logique métier}
\begin{itemize}
\item Lors d'un click sur le bouton, récupérer les valeurs de montant et durée
\item Aide : \href{http://developer.android.com/reference/java/lang/Integer.html#parseInt(java.lang.String)}{Integer.parseInt(String)} permet de convertir une chaîne en entier
\item Implémenter la logique métier en utilisant le code ci-dessous
\item Afficher ce résultat dans un toast
\item Afficher ce résultat dans une view (TextView)
\end{itemize}
 \begin{lstlisting}[language=XML]
 private double calculMensualites(
     double montant, double taux,double nbmensualites) {
    	return (k * (t/12)) / (1-Math.pow((1+t/12), -n));
 }
\end{lstlisting}

\begin{enumerate}
 \setcounter{enumi}{5}
\item Comment cacher la view contenant les mensualités tant qu'elles n'ont pas été calculées ?
\item Que proposez vous si l'utilisateur n'a pas rempli les 2 champs ?
\end{enumerate}
\newpage
\section{Aller plus loin}
\subsection{Un peu de style}
\begin{itemize}
\item Changer le nom de l'application
\item Modifier l'icône pour le lanceur d'applications
\item Modifier le layout pour organiser les différents éléments de façon ``user-friendly''
\end{itemize}
\subsection{Traduire l'application}
\begin{itemize}
\item S'assurer que toutes les strings ont été définis en XML
\item Créer un dossier values-fr et y copier le fichier strings.xml
\item Traduire le contenu de strings.xml
\item Tester sur émulateur en changeant la langue dans le menu
\end{itemize}
\\\*
\textbf{Les parties ci-dessous contiennent des élements non (encore) vus en cours.}
\subsection{Partager le résultat}
\begin{itemize}
\item Ajouter un bouton : partager
\item Mettre une icône de partage à ce bouton (setBackgroundResource)
\item Lors d'un click sur le bouton, lancer un intent implicite pour partager le résultat
\end{itemize}
\begin{enumerate}
 \setcounter{enumi}{7}
\item Comment filtrer les activities proposées pour le partage ?
\item Que se passe t'il si aucune activity n'est capable de répondre à l'intent ?
\end{enumerate}
\subsection{Créer un historique des calculs}
\begin{enumerate}
 \setcounter{enumi}{9}
\item Quelle solution de stockage de l'historique des calculs vous parait la mieux adaptée ? (Rappel : on a le choix entre préferences, BDD SQLite et fichier plat) 
\end{enumerate}
\begin{itemize}
\item Mettre en place la solution choisie
\item A chaque calcul, rajouter un élément à l'historique
\end{itemize}
\subsection{Afficher l'historique}
\begin{itemize}
\item L'historique sera affiché dans un écran séparé
\item Créer une nouvelle Activity qui contiendra l'historique (penser à la déclarer dans le Manifest)
\end{itemize}
\begin{enumerate}
 \setcounter{enumi}{10}
\item Quel ViewGroup vous paraît le plus adapté pour afficher l'historique (nombre indéfini d'éléments) ?
\item Comment lancer cette activité ?
\end{enumerate}

\end{document}


